<!DOCTYPE html>
<html>
	<head>
		<!-- IMAGE-JS - could try to figure out how to include as a module? -->
		<script src="/js-modules/modules/02-silhouette/image.min.js"></script>
		<!-- IMAGE-TRACER - could try to figure out how to include as a module? -->
		<script src="/js-modules/modules/03-trace/imagetracer_v1.2.6.js"></script>
		<!-- TODO: can the below be made into modules? -->
		<script src="/js-modules/modules/03-trace/pathseg.js"></script>
		<script src="/js-modules/modules/03-trace/path-to-polygon.js"></script>
		<!-- main module -->
		<script type="module" src="/js-modules/main.js"></script>
		<!-- main execution -->
		<script>
			async function runAll() {
				await silhouetteExecute("raw-image", "processed-image");
				await traceExecute("processed-image", "trace-svg");
			}

			async function resetAndRunAll() {
				silhouetteResetSettings();
				await runAll();
			}
		</script>
	</head>
	<body onload="resetAndRunAll()">
		<!--  -->
		<!--  -->
		<!--  -->
		<h2>UPLOAD</h2>
		<!--  -->
		<!--  -->
		<!--  -->

		<p>
			<input
				type="file"
				id="image-input"
				accept="image/png, image/jpeg"
				onchange="onImageSelection(this, 'raw-image', resetAndRunAll)"
			/>
		</p>

		<!--  -->
		<!--  -->
		<!--  -->
		<h2>SILHOUETTE</h2>
		<!--  -->
		<!--  -->
		<!--  -->

		<div style="display: flex; align-items: center">
			<img id="raw-image" src="/sample-char-art-00.jpeg" />
			<img id="processed-image" />
		</div>

		<h3>Tweaks</h3>
		<p>
			Threshold (100 means auto)
			<input id="threshold" type="number" min="0" max="100" value="100" />
		</p>
		<p>
			Radius
			<input id="radius" type="number" min="1" max="100" value="5" />
		</p>
		<p>
			<button onClick="runAll()">Apply tweaks</button>
		</p>

		<!--  -->
		<!--  -->
		<!--  -->
		<h2 style="color: magenta">TRACE</h2>
		<!--  -->
		<!--  -->
		<!--  -->

		<div id="trace-svg"></div>
		<h3>Tweaks</h3>
		<p>Path omit: <input id="pathomit" type="number" min="0" value="30" /></p>
		<p>
			<button onClick="runAll()">Apply tweaks</button>
		</p>
	</body>
</html>
